<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lista de Ciudades</title>
  <!-- Bootstrap (CDN) -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
  <style>
    /* Estilo personalizado para reducir la anchura de las columnas */
    .table thead th, 
    .table tbody td {
      /* Ajusta el width según necesites */
      width: 120px; 
      white-space: nowrap; /* evita que el texto salte de línea */
    }
  </style>
</head>
<body class="bg-light">
  <div class="container my-4">
    <h1 class="mb-4 text-center">Lista de Ciudades</h1>
    
    <div class="row">
      <!-- Columna 1: Tabla de Población -->
      <div class="col-md-5">
        <h2>Tabla de Población</h2>
        <div id="tablaPoblacion" class="table-responsive mb-5"></div>
      </div>
      
      <!-- Espacio amplio en medio -->
      <div class="col-md-2"></div>
      
      <!-- Columna 2: Tabla de Área -->
      <div class="col-md-5">
        <h2>Tabla de Área</h2>
        <div id="tablaArea" class="table-responsive"></div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS (CDN) -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script>
    // Función para cargar un archivo CSV, parsearlo y devolver un array de objetos
    async function loadCSV(url) {
      const response = await fetch(url);
      const text = await response.text();

      // Separamos por líneas
      const lines = text.trim().split('\n'); 
      // Primera línea: cabeceras
      // Si tu CSV usa comas, split(','); si usa punto y coma, split(';')
      const headers = lines[0].split(','); 
      // Resto de líneas: datos
      const data = lines.slice(1).map(line => {
        const values = line.split(','); 
        let obj = {};
        headers.forEach((header, i) => {
          obj[header] = values[i];
        });
        return obj;
      });

      return data;
    }

    // Función para crear tabla HTML a partir de un array de objetos
    function createTableHTML(data) {
      if(!data || data.length === 0) return '<p>No hay datos</p>';

      // Obtener cabeceras
      const headers = Object.keys(data[0]);
      // Clase 'table-sm' para reducir padding vertical
      let html = '<table class="table table-sm table-bordered table-striped">';
      // Encabezado
      html += '<thead class="thead-dark"><tr>';
      headers.forEach(h => { html += `<th>${h}</th>`; });
      html += '</tr></thead>';
      // Cuerpo
      html += '<tbody>';
      data.forEach(row => {
        html += '<tr>';
        headers.forEach(h => {
          html += `<td>${row[h] || ''}</td>`;
        });
        html += '</tr>';
      });
      html += '</tbody></table>';
      return html;
    }

    (async () => {
      try {
        // Cargar CSV de Población
        const dataPoblacion = await loadCSV('poblacion.csv');
        document.getElementById('tablaPoblacion').innerHTML = createTableHTML(dataPoblacion);

        // Cargar CSV de Área
        const dataArea = await loadCSV('area.csv');
        document.getElementById('tablaArea').innerHTML = createTableHTML(dataArea);

      } catch(error) {
        console.error('Error al cargar CSV:', error);
      }
    })();
  </script>
</body>
</html>
